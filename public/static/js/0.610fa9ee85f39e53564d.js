webpackJsonp([0],{"6AQa":function(t,e){},Cdx3:function(t,e,o){var i=o("sB3e"),l=o("lktj");o("uqUo")("keys",function(){return function(t){return l(i(t))}})},fZjL:function(t,e,o){t.exports={default:o("jFbC"),__esModule:!0}},jFbC:function(t,e,o){o("Cdx3"),t.exports=o("FeBl").Object.keys},uqUo:function(t,e,o){var i=o("kM2E"),l=o("FeBl"),n=o("S82l");t.exports=function(t,e){var o=(l.Object||{})[t]||Object[t],a={};a[t]=e(o),i(i.S+i.F*n(function(){o(1)}),"Object",a)}},yiVv:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("fZjL"),l=o.n(i),n={name:"Books",components:{},data:function(){return{books:[],book:{_id:null,id:null,title:null,author:null,press:null,price:null,inventory:null},dialogTitle:null,dialogVisible:!1,tableLoading:!1,currentPage:1,pageSize:20,total:0,rules:{id:[{required:!0,message:"必填，不可为空",trigger:"change"}],title:[{required:!0,message:"必填，不可为空",trigger:"change"}],author:[{required:!0,message:"必填，不可为空",trigger:"change"}],press:[{required:!0,message:"必填，不可为空",trigger:"change"}],price:[{required:!0,message:"必填，不可为空",trigger:"change"}],inventory:[{required:!0,message:"必填，不可为空",trigger:"change"}]}}},methods:{refresh:function(){this.emptyParam(),this.loadBooks()},emptyParam:function(){var t=this;this.tableLoading=!1,this.dialogVisible=!1,l()(this.book).forEach(function(e){return t.book[e]=null}),this.$refs.multipleSelect.clearSelection(),this.$refs.book.resetFields()},addABook:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.tableLoading=!0,console.log(e.book.id),e.book._id?e.putRequest("/api/books",e.book).then(function(t){e.tableLoading=!1,3===t.data.code&&(e.emptyParam(),e.loadBooks())}):e.postRequest("/api/books",e.book).then(function(t){e.tableLoading=!1,1===t.data.code&&(e.emptyParam(),e.loadBooks())})})},showAddView:function(){this.dialogTitle="新增书籍",this.dialogVisible=!0},loadBooks:function(){var t=this;this.tableLoading=!0,l()(this.book).forEach(function(e){""==t.book[e]&&(t.book[e]=null)});var e=this.book;e.page=this.currentPage,e.size=this.pageSize,this.getRequest("/api/books",e).then(function(e){t.tableLoading=!1,0===e.data.code&&(t.books=e.data.list,t.total=e.data.total)})},handleSizeChange:function(t){this.pageSize=t,this.loadBooks()},handleCurrentChange:function(t){this.currentPage=t,this.loadBooks()},editBook:function(t){this.dialogTitle="编辑书籍信息",this.dialogVisible=!0,this.book._id=t._id,this.book.id=t.id,this.book.title=t.title,this.book.author=t.author,this.book.press=t.press,this.book.price=t.price,this.book.inventory=t.inventory},delBook:function(t){var e=this;this.$confirm("确定删除"+t.title+"的信息么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.tableLoading=!0,e.deleteRequest("/api/books",t).then(function(t){e.tableLoading=!1,2===t.data.code&&(e.emptyParam(),e.loadBooks())})}).catch(function(){})},handleMenuOpen:function(t,e){console.log(t,e)},handleMenuSelect:function(t,e){console.log(t,e)}},mounted:function(){this.loadBooks()}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-container",[o("el-menu",{staticClass:"self-side-menu",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:t.handleMenuOpen,select:t.handleMenuSelect}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-location"}),t._v(" "),o("span",[t._v("导航一")])]),t._v(" "),o("el-menu-item-group",[o("template",{slot:"title"},[t._v("分组一")]),t._v(" "),o("el-menu-item",{attrs:{index:"1-1"}},[t._v("选项1")]),t._v(" "),o("el-menu-item",{attrs:{index:"1-2"}},[t._v("选项2")])],2),t._v(" "),o("el-menu-item-group",{attrs:{title:"分组2"}},[o("el-menu-item",{attrs:{index:"1-3"}},[t._v("选项3")])],1),t._v(" "),o("el-submenu",{attrs:{index:"1-4"}},[o("template",{slot:"title"},[t._v("选项4")]),t._v(" "),o("el-menu-item",{attrs:{index:"1-4-1"}},[t._v("选项1")])],2)],2),t._v(" "),o("el-menu-item",{attrs:{index:"2"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航二")])]),t._v(" "),o("el-menu-item",{attrs:{index:"3",disabled:""}},[o("i",{staticClass:"el-icon-document"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航三")])]),t._v(" "),o("el-menu-item",{attrs:{index:"4"}},[o("i",{staticClass:"el-icon-setting"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航四")])])],1),t._v(" "),o("el-container",{class:t.setContainerH()},[o("el-header",[o("div",{staticClass:"self-title-text"},[t._v("书籍列表")]),t._v(" "),o("div",{staticClass:"self-button-top"},[o("el-button",{staticStyle:{width:"100px"},attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:t.showAddView}},[t._v("新增\n\t\t\t\t\t")]),t._v(" "),o("el-button",{staticStyle:{width:"100px"},attrs:{type:"info",size:"small",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("\n\t\t\t\t\t\t刷新\n\t\t\t\t\t")])],1)]),t._v(" "),o("el-main",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleSelect",attrs:{data:t.books,"tooltip-effect":"dark",border:"",stripe:"",height:t.setTableH()}},[o("el-table-column",{attrs:{type:"selection",width:"36px",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"id",label:"书籍ID",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"书籍名称",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者名",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"press",label:"出版社",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"price",label:"书本单价",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"inventory",label:"库存量",align:"center",width:""}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.editBook(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.delBook(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("div",{staticClass:"self-button-bottom"},[o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total,sizes,prev,pager,next,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1),t._v(" "),o("el-form",{ref:"book",attrs:{model:t.book,rules:t.rules}},[o("div",{staticStyle:{"text-align":"left"}},[o("el-dialog",{attrs:{width:"70%",title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("el-button",{attrs:{size:"large"},on:{click:t.emptyParam}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addABook("book")}}},[t._v("确定")])]},proxy:!0}])},[o("el-row",{staticStyle:{"padding-left":"40px"}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"id",label:"书籍ID："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.id,callback:function(e){t.$set(t.book,"id",e)},expression:"book.id"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"title",label:"书籍名称："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.title,callback:function(e){t.$set(t.book,"title",e)},expression:"book.title"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"author",label:"作者名："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.author,callback:function(e){t.$set(t.book,"author",e)},expression:"book.author"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"press",label:"出版社："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.press,callback:function(e){t.$set(t.book,"press",e)},expression:"book.press"}})],1)],1)],1),t._v(" "),o("el-row",{staticStyle:{"padding-left":"40px"}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"price",label:"书本单价："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.price,callback:function(e){t.$set(t.book,"price",e)},expression:"book.price"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{prop:"inventory",label:"库存量："}},[o("el-input",{staticStyle:{width:"150px"},attrs:{size:"small","prefix-icon":"el-icon-edit"},model:{value:t.book.inventory,callback:function(e){t.$set(t.book,"inventory",e)},expression:"book.inventory"}})],1)],1)],1)],1)],1)])],1)},staticRenderFns:[]};var s=o("VU/8")(n,a,!1,function(t){o("6AQa")},"data-v-27202ab6",null);e.default=s.exports}});
//# sourceMappingURL=0.610fa9ee85f39e53564d.js.map